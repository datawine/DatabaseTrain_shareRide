<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no, width=device-width">
    <title>鼠标拾取地图坐标</title>
    <link rel="stylesheet" href="http://cache.amap.com/lbs/static/main1119.css"/>
    <script type="text/javascript"
            src="http://webapi.amap.com/maps?v=1.4.6&key=c42bdb8266a44d84f8f465d07b1aae1f"></script>
    <script type="text/javascript" src="http://cache.amap.com/lbs/static/addToolbar.js"></script>
</head>
<body>
<div id="container"></div>

<div class="button-group">
  <input type="button" class="button" value="删除多个点标记" id="clearMarker"/>
</div>

<script type="text/javascript">
    var markers = [];
    var marker_num = 0;

    var map = new AMap.Map("container", {
        resizeEnable: true,
        center: [116.397428, 39.90923],
        zoom: 13
    });

    //为地图注册click事件获取鼠标点击出的经纬度坐标
    var clickEventListener = map.on('click', function(e) {
        addMarker(e.lnglat.getLng(), e.lnglat.getLat());
    });

    function addMarker(lng, lat) {
        marker_num ++;
        var marker = new AMap.Marker({
            icon: "http://webapi.amap.com/theme/v1.3/markers/n/mark_b.png",
            position: [lng, lat],
            mno: marker_num - 1
        });
        var markerNo = marker_num - 1;
        marker.setMap(map);
        marker.on('rightclick', function(e) {
            var contextMenu = new AMap.ContextMenu();  //创建右键菜单
  
            contextMenu.addItem("删除这个点", function(e) {
                markers[markerNo].setMap(null);
                marker_num --;
                markers.splice(markerNo, 1);
                for (var i = 0; i < markers.length; i ++) {
                  markers[i].setIcon = "http://webapi.amap.com/theme/v1.3/markers/n/mark_b" + i + ".png";
                }
            }, 0);

            contextMenu.open(map, e.lnglat);
            this.markerNo = markerNo;
            console.log(this.markerNo);
        });

        markers.push(marker);
    }

  
</script>
</body>
</html>